---
layout: post
title: "redis数据库事务处理及hash,list,set类型的python开发应用"
categories: python
tags: [redis]
date: 2015-01-04 13:30:24
---

<div><p><span style="font-family: '微软雅黑','microsoft yahei';"><span class="Apple-style-span" style="font-size: 20px; color: rgb(0, 112, 192);">随着这段时间做项目，又拾起来redis这个nosql利器。。</span></span><span style="font-family: '微软雅黑','microsoft yahei';"><span class="Apple-style-span" style="font-size: 20px;">。</span></span></p><p><span style="font-family: '微软雅黑','microsoft yahei';"><span class="Apple-style-span" style="font-size: 20px;">以前redis用的最多方面是string的kv存储，队列和mq通信。这段时间重新系统的学习了redis。 </span></span></p><p><span class="Apple-style-span" style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px;">关于redis hash哈希的解释：（<span style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px; color: rgb(0, 176, 80);">很官方</span>）</span><br></p><p><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei';">redis hash是一个string类型的field和value的映射表.它的添加，删除操作都是O(1)（</span><strong><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei';">平均</span></strong><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei';">）.hash特别适合用于存储对象。相较于将对象的每个字段存成<br>单个string类型。将一个对象存储在hash类型中会占用更少的内存，并且可以更方便的存取整个对象。省内存的原因是新建一个hash对象时开始是用zipmap（又称为small hash）来存储的。这个zipmap其实并不是hash table，但是zipmap相比正常的hash实现可以节省不少hash本身需要的一些元数据存储开销。尽管zipmap的添加，删除，查找都是O(n)，但是由于一般对象的field数量都不太多。所以使用zipmap也是很快的,也就是说添加删除平均还是O(1)。如果field或者value的大小超出一定限制后，redis会在内部自动将zipmap替换成正常的hash实现. 这个限制可以在配置文件中指定</span></p><span style="font-family: '微软雅黑','microsoft yahei';"><span class="Apple-style-span" style="font-size: 20px;">单个string类型。将一个对象存储在hash类型中会占用更少的内存，并且可以更方便的存取整个对象。省内存的原因是新建一个hash对象时开始是用zipmap（又称为small hash）来存储的。这个zipmap其实并不是hash table，但是zipmap相比正常的hash实现可以节省不少hash本身需要的一些元数据存储开销。尽管zipmap的添加，删除，查找都是O(n)，但是由于一般对象的field数量都不太多。所以使用zipmap也是很快的,也就是说添加删除平均还是O(1)。如果field或者value的大小超出一定限制后，redis会在内部自动将zipmap替换成正常的hash实现. 这个限制可以在配置文件中指定</span></span></div><p style="text-indent: 0px; margin: 10px auto;"><span style="font-family: '微软雅黑','microsoft yahei'; font-size: 18px; color: rgb(0, 176, 240);">hash-max-zipmap-entries 64 #配置字段最多64个<br>hash-max-zipmap-value 512 #配置value最大为512字节</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';"><span style="color: rgb(255, 0, 0);">上面说完，就该我了：</span></span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';">最近在做一个域用户管理的相关的东西。 要生成两个临时的token。 要是单纯的 一个key 一个value 针对value expire时间限制的话是完全可以的。 但是一对多话，我就不知道咋搞了。。。 我想了很多的方案。 改用复杂的mysql 加了时间的对比。 实现是实现了，但是方法很搓。。。 后来再看redis文档，才发现，redis 有个hash的东西。 可以做成配置字段的概念。</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';">比如 ：（<span style="color: rgb(255, 0, 0);">大家看下面字段，就明白了redis的hash表了吧</span>）</span></p><p style="text-indent: 0px; margin: 10px auto;"><span class="Apple-style-span" style="color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei'; font-size: large;">运维部 高xx c开发</span></p><p style="text-indent: 0px; margin: 10px auto;"><span class="Apple-style-span" style="color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei'; font-size: large;">运维部 李xx cdn运维</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';">运维部 峰云 啥都行</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';">无线部 王xx 前端</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';">视频部 樊xx ruby</span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 18px; color: rgb(0, 176, 240); font-family: '微软雅黑','microsoft yahei';"><br></span></p><p style="text-indent: 0px; margin: 10px auto;"><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei';">下面介绍hash相关命令：</span></p><div><div id="highlighter_770680" class="syntaxhighlighter  as3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="as3 value">1</code><code class="as3 plain">. hset</code></div><div class="line number2 index1 alt1"><code class="as3 plain">HSET key field value</code></div><div class="line number3 index2 alt2"><code class="as3 plain">将哈希表key中的域field的值设为value。如果key不存在，一个新的哈希表被创建并进行hset操作。如果域field已经存在于哈希表中，旧值将被覆盖。</code></div><div class="line number4 index3 alt1"><code class="as3 value">2</code><code class="as3 plain">. hget</code></div><div class="line number5 index4 alt2"><code class="as3 plain">HGET key field</code></div><div class="line number6 index5 alt1"><code class="as3 plain">返回哈希表key中指定的field的值。</code></div><div class="line number7 index6 alt2"><code class="as3 value">3</code><code class="as3 plain">. hsetnx</code></div><div class="line number8 index7 alt1"><code class="as3 plain">HSETNX key field value</code></div><div class="line number9 index8 alt2"><code class="as3 plain">将哈希表key中的域field的值设置为value，当且仅当域field不存在。若域field已经存在，该操作无效。如果key不存在，一个新哈希表被创建并执行hsetnx命令。</code></div><div class="line number10 index9 alt1"><code class="as3 value">4</code><code class="as3 plain">. hmset</code></div><div class="line number11 index10 alt2"><code class="as3 plain">HMSET key field value [field value ...]</code></div><div class="line number12 index11 alt1"><code class="as3 plain">同时将多个field - value(域-值)对设置到哈希表key中。此命令会覆盖哈希表中已存在的域。如果key不存在，一个空哈希表被创建并执行hmset操作。</code></div><div class="line number13 index12 alt2"><code class="as3 value">5</code><code class="as3 plain">. hmget</code></div><div class="line number14 index13 alt1"><code class="as3 plain">HMGET key field [field ...]</code></div><div class="line number15 index14 alt2"><code class="as3 plain">返回哈希表key中，一个或多个给定域的值。如果给定的域不存在于哈希表，那么返回一个nil值。因为不存在的key被当作一个空哈希表来处理，所以对一个不存在的key进行hmget操作将返回一个只带有nil值的表。</code></div><div class="line number16 index15 alt1"><code class="as3 value">6</code><code class="as3 plain">. hgetall</code></div><div class="line number17 index16 alt2"><code class="as3 plain">HGETALL key</code></div><div class="line number18 index17 alt1"><code class="as3 plain">返回哈希表key中，所有的域和值。在返回值里，紧跟每个域名(field name)之后是域的值(value)，所以返回值的长度是哈希表大小的两倍。</code></div><div class="line number19 index18 alt2"><code class="as3 value">7</code><code class="as3 plain">. hdel</code></div><div class="line number20 index19 alt1"><code class="as3 plain">HDEL key field [field ...]</code></div><div class="line number21 index20 alt2"><code class="as3 plain">删除哈希表key中的一个或多个指定域，不存在的域将被忽略。</code></div><div class="line number22 index21 alt1"><code class="as3 value">8</code><code class="as3 plain">. hlen</code></div><div class="line number23 index22 alt2"><code class="as3 plain">HLEN key</code></div><div class="line number24 index23 alt1"><code class="as3 plain">返回哈希表key对应的field的数量。</code></div><div class="line number25 index24 alt2"><code class="as3 value">9</code><code class="as3 plain">. hexists</code></div><div class="line number26 index25 alt1"><code class="as3 plain">HEXISTS key field</code></div><div class="line number27 index26 alt2"><code class="as3 plain">查看哈希表key中，给定域field是否存在。</code></div><div class="line number28 index27 alt1"><code class="as3 value">10</code><code class="as3 plain">. hkeys</code></div><div class="line number29 index28 alt2"><code class="as3 plain">HKEYS key</code></div><div class="line number30 index29 alt1"><code class="as3 plain">获得哈希表中key对应的所有field。</code></div><div class="line number31 index30 alt2"><code class="as3 value">11</code><code class="as3 plain">. hvals</code></div><div class="line number32 index31 alt1"><code class="as3 plain">HVALS key</code></div><div class="line number33 index32 alt2"><code class="as3 plain">获得哈希表中key对应的所有values。</code></div><div class="line number34 index33 alt1"><code class="as3 value">12</code><code class="as3 plain">. hincrby</code></div><div class="line number35 index34 alt2"><code class="as3 plain">为哈希表key中的域field的值加上增量increment。增量也可以为负数，相当于对给定域进行减法操作。如果key不存在，一个新的哈希表被创建并执行hincrby命令。如果域field不存在，那么在执行命令前，域的值被初始化为</code><code class="as3 value">0</code><code class="as3 plain">。对一个储存字符串值的域field执行hincrby命令将造成一个错误。本操作的值限制在</code><code class="as3 value">64</code><code class="as3 plain">位(bit)有符号数字表示之内。</code></div></div></td></tr></tbody></table></div></div><p><a href="/upload/images/232217518.jpg" target="_blank"><img onunload="" onsubmit="" onselect="" onresize="" onreset="" onmouseup="" onmouseover="" onmouseout="" onmousemove="" onmousedown="" onkeyup="" onkeypress="" onkeydown="" onfocus="" onerror="" ondblclick="" onclick="" onchange="" onblur="" onabort="" onload="if(this.width>650) this.width=650;" src="/upload/images/232217518.jpg" title="QQ截图20131030232111.jpg" alt="232217518.jpg" width="650"></a><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei'; color: rgb(0, 32, 96);">下面是我用python写的实例，大家用ipython的时候，会有很好的提示的，在python中的用法，基本和redis-cli差不多的。</span></p><p><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei'; color: rgb(0, 32, 96);"><a href="/upload/images/232720719.jpg" target="_blank"><img onunload="" onsubmit="" onselect="" onresize="" onreset="" onmouseup="" onmouseover="" onmouseout="" onmousemove="" onmousedown="" onkeyup="" onkeypress="" onkeydown="" onfocus="" onerror="" ondblclick="" onclick="" onchange="" onblur="" onabort="" onload="if(this.width>650) this.width=650;" src="/upload/images/232720719.jpg" title="QQ截图20131030232610.jpg" alt="232720719.jpg"></a></span></p><p><span style="font-size: 20px; font-family: '微软雅黑','microsoft yahei'; color: rgb(146, 208, 80);"><br></span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';">redis list 类型：</span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"></span></p><div><span style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px; color: rgb(0, 176, 80);">push pop 队列先进先出 栈先进后出 list 既可以作为栈又可以作为队列</span></div><p><span style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px; color: rgb(0, 176, 80);">List 是一个链表结构，主要功能是push,pop,获取一个范围的所有值等等，操作中key理解为链表的名字</span></p><p><span style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px; color: rgb(0, 176, 80);"><a href="/upload/images/235330473.jpg" target="_blank"><img onunload="" onsubmit="" onselect="" onresize="" onreset="" onmouseup="" onmouseover="" onmouseout="" onmousemove="" onmousedown="" onkeyup="" onkeypress="" onkeydown="" onfocus="" onerror="" ondblclick="" onclick="" onchange="" onblur="" onabort="" onload="if(this.width>650) this.width=650;" src="/upload/images/235330473.jpg" title="QQ截图20131030235316.jpg" alt="235330473.jpg" width="650"></a></span></p><div><div id="highlighter_370027" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">In [</code><code class="python value">91</code><code class="python plain">]: r.lpush(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python string">'xiaorui.cc'</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python plain">Out[</code><code class="python value">91</code><code class="python plain">]: </code><code class="python value">1L</code></div><div class="line number3 index2 alt2"><code class="python plain">In [</code><code class="python value">92</code><code class="python plain">]: r.lpush(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python string">'163.com'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python plain">Out[</code><code class="python value">92</code><code class="python plain">]: </code><code class="python value">2L</code></div><div class="line number5 index4 alt2"><code class="python plain">In [</code><code class="python value">93</code><code class="python plain">]: r.lpush(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python string">'sina.com'</code><code class="python plain">)</code></div><div class="line number6 index5 alt1"><code class="python plain">Out[</code><code class="python value">93</code><code class="python plain">]: </code><code class="python value">3L</code></div><div class="line number7 index6 alt2"><code class="python plain">In [</code><code class="python value">94</code><code class="python plain">]: r.lpush(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python string">'qq.com'</code><code class="python plain">)</code></div><div class="line number8 index7 alt1"><code class="python plain">Out[</code><code class="python value">94</code><code class="python plain">]: </code><code class="python value">4L</code></div><div class="line number9 index8 alt2"><code class="python plain">In [</code><code class="python value">95</code><code class="python plain">]: r.lpush(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python string">'letv.com'</code><code class="python plain">)</code></div><div class="line number10 index9 alt1"><code class="python plain">Out[</code><code class="python value">95</code><code class="python plain">]: </code><code class="python value">5L</code></div><div class="line number11 index10 alt2"><code class="python plain">In [</code><code class="python value">96</code><code class="python plain">]: r.lrange(</code><code class="python string">'url'</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">,</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">) </code></div><div class="line number12 index11 alt1"><code class="python plain">Out[</code><code class="python value">96</code><code class="python plain">]: [</code><code class="python string">'letv.com'</code><code class="python plain">, </code><code class="python string">'qq.com'</code><code class="python plain">, </code><code class="python string">'sina.com'</code><code class="python plain">, </code><code class="python string">'163.com'</code><code class="python plain">, </code><code class="python string">'xiaorui.cc'</code><code class="python plain">]</code></div><div class="line number13 index12 alt2"><code class="python plain">In [</code><code class="python value">97</code><code class="python plain">]: r.rpop(</code><code class="python string">"url"</code><code class="python plain">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number14 index13 alt1"><code class="python plain">Out[</code><code class="python value">97</code><code class="python plain">]: </code><code class="python string">'xiaorui.cc'</code></div><div class="line number15 index14 alt2"><code class="python plain">In [</code><code class="python value">98</code><code class="python plain">]: r.rpop(</code><code class="python string">"url"</code><code class="python plain">)</code></div><div class="line number16 index15 alt1"><code class="python plain">Out[</code><code class="python value">98</code><code class="python plain">]: </code><code class="python string">'163.com'</code></div><div class="line number17 index16 alt2"><code class="python plain">In [</code><code class="python value">99</code><code class="python plain">]: r.rpop(</code><code class="python string">"url"</code><code class="python plain">)</code></div><div class="line number18 index17 alt1"><code class="python plain">Out[</code><code class="python value">99</code><code class="python plain">]: </code><code class="python string">'sina.com'</code></div><div class="line number19 index18 alt2"><code class="python plain">In [</code><code class="python value">100</code><code class="python plain">]: r.rpop(</code><code class="python string">"url"</code><code class="python plain">)</code></div><div class="line number20 index19 alt1"><code class="python plain">Out[</code><code class="python value">100</code><code class="python plain">]: </code><code class="python string">'qq.com'</code></div><div class="line number21 index20 alt2"><code class="python plain">In [</code><code class="python value">101</code><code class="python plain">]: r.rpop(</code><code class="python string">"url"</code><code class="python plain">)</code></div><div class="line number22 index21 alt1"><code class="python plain">Out[</code><code class="python value">101</code><code class="python plain">]: </code><code class="python string">'letv.com'</code></div></div></td></tr></tbody></table></div></div><p><span style="font-family: '微软雅黑','microsoft yahei'; font-size: 20px; color: rgb(0, 176, 80);"><a href="/upload/images/235330473.jpg" target="_blank"></a></span><br></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';">redis的list的详细点的用法：</span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"></span></p><div><div id="highlighter_645789" class="syntaxhighlighter  as3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="as3 value">1</code>&nbsp; <code class="as3 plain">lpush&nbsp; 从list 头部压入一个元素&nbsp;&nbsp; 先进后出</code></div><div class="line number2 index1 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush mylist </code><code class="as3 string">"word"</code></div><div class="line number3 index2 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush mylist </code><code class="as3 string">"ehll"</code></div><div class="line number4 index3 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lrange mylist </code><code class="as3 value">0</code> <code class="as3 plain">-</code><code class="as3 value">1</code>&nbsp;&nbsp;&nbsp; <code class="as3 plain">显示&nbsp; ehll&nbsp;&nbsp;&nbsp; word</code></div><div class="line number5 index4 alt2"><code class="as3 value">2</code>&nbsp; <code class="as3 plain">lrange mylist </code><code class="as3 value">0</code> <code class="as3 plain">-</code><code class="as3 value">1</code>&nbsp;&nbsp;&nbsp; <code class="as3 value">0</code><code class="as3 plain">代表从头部&nbsp; </code><code class="as3 value">1</code> <code class="as3 plain">从尾部</code></div><div class="line number6 index5 alt1"><code class="as3 value">3</code>&nbsp; <code class="as3 plain">rpush&nbsp; 从尾部压入一个元素&nbsp;&nbsp;&nbsp; 先进先出</code></div><div class="line number7 index6 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">rpush list2&nbsp; zhang</code></div><div class="line number8 index7 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">rpush list2&nbsp;&nbsp; san</code></div><div class="line number9 index8 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lrange list2&nbsp; </code><code class="as3 value">0</code> <code class="as3 plain">-</code><code class="as3 value">1</code></div><div class="line number10 index9 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 keyword">return</code>&nbsp; <code class="as3 plain">zhang san</code></div><div class="line number11 index10 alt2"><code class="as3 value">4</code>&nbsp; <code class="as3 plain">linsert从中间压入一个元素</code></div><div class="line number12 index11 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush mylist3&nbsp; </code><code class="as3 string">"world"</code></div><div class="line number13 index12 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">在&nbsp; one&nbsp;&nbsp; two 直接压入three</code></div><div class="line number14 index13 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush list3 one</code></div><div class="line number15 index14 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush list3 two</code></div><div class="line number16 index15 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">linsert list3 before one three</code></div><div class="line number17 index16 alt2"><code class="as3 value">5</code>&nbsp; <code class="as3 plain">lset 给某个元素赋值</code></div><div class="line number18 index17 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush list3 one</code></div><div class="line number19 index18 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpush list3 two</code></div><div class="line number20 index19 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lset list3 </code><code class="as3 value">1</code> <code class="as3 plain">three</code></div><div class="line number21 index20 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">two&nbsp; 的值被改变成three</code></div><div class="line number22 index21 alt1"><code class="as3 value">6</code> <code class="as3 plain">lrem&nbsp; 从key 对应list中删除n个和value相同的元素&nbsp;&nbsp; (n&lt;</code><code class="as3 value">0</code><code class="as3 plain">从尾部删除，n=</code><code class="as3 value">0</code><code class="as3 plain">全部删除)</code></div><div class="line number23 index22 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">remove</code></div><div class="line number24 index23 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lrem&nbsp; list6 </code><code class="as3 value">2</code> <code class="as3 plain">one&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 删除</code><code class="as3 value">2</code><code class="as3 plain">个和one一样值元素</code></div><div class="line number25 index24 alt2"><code class="as3 value">7</code> <code class="as3 plain">ltrim&nbsp; 保留指定key范围内的数据</code></div><div class="line number26 index25 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="as3 value">1</code> <code class="as3 value">2</code> <code class="as3 value">3</code> <code class="as3 value">4</code></div><div class="line number27 index26 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">ltrim&nbsp;&nbsp; list8 </code><code class="as3 value">1</code> <code class="as3 plain">-</code><code class="as3 value">1</code>&nbsp; <code class="as3 plain">保留的元素范围，其余的都删除</code></div><div class="line number28 index27 alt1"><code class="as3 value">8</code>&nbsp; <code class="as3 plain">lpop&nbsp;&nbsp; 从list 头部删除一个元素，并返回删除的元素</code></div><div class="line number29 index28 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lpop mylist</code></div><div class="line number30 index29 alt1"><code class="as3 value">9</code>&nbsp; <code class="as3 plain">rpop&nbsp; 从list 尾部删除一个元素，并返回删除的元素</code></div><div class="line number31 index30 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">rpop&nbsp; mylist</code></div><div class="line number32 index31 alt1"><code class="as3 value">10</code>&nbsp; <code class="as3 plain">rpoplpush&nbsp; 从尾部删除一个元素并从头部添加一个元素</code></div><div class="line number33 index32 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">rpoplpush&nbsp;&nbsp; mylist1&nbsp;&nbsp; mylist2&nbsp; 把mylist1 元素删除 添加到mylist2中</code></div><div class="line number34 index33 alt1"><code class="as3 value">11</code> <code class="as3 plain">lindex 返回名称为key的list 中index 位置的元素</code></div><div class="line number35 index34 alt2"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lindex mylist </code><code class="as3 value">0</code></div><div class="line number36 index35 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">lindex mylist </code><code class="as3 value">1</code></div><div class="line number37 index36 alt2"><code class="as3 value">12</code>&nbsp; <code class="as3 plain">llen 返回链表中的元素个数</code></div><div class="line number38 index37 alt1"><code class="as3 spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="as3 plain">llen&nbsp; mylist</code></div></div></td></tr></tbody></table></div></div><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"></span><br></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';">对于 redis set的使用：</span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"><br></span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"></span></p><div><div id="highlighter_870733" class="syntaxhighlighter  as3"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="as3 plain">sadd(key, member)：向名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">中添加元素member</code></div><div class="line number2 index1 alt1"><code class="as3 plain">srem(key, member) ：删除名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">中的元素member</code></div><div class="line number3 index2 alt2"><code class="as3 plain">spop(key) ：随机返回并删除名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">中一个元素</code></div><div class="line number4 index3 alt1"><code class="as3 plain">smove(srckey, dstkey, member) ：移到集合元素</code></div><div class="line number5 index4 alt2"><code class="as3 plain">scard(key) ：返回名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">的基数</code></div><div class="line number6 index5 alt1"><code class="as3 plain">sismember(key, member) ：member是否是名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">的元素</code></div><div class="line number7 index6 alt2"><code class="as3 plain">sinter(key1, key2,…key N) ：求交集</code></div><div class="line number8 index7 alt1"><code class="as3 plain">sinterstore(dstkey, (keys)) ：求交集并将交集保存到dstkey的集合</code></div><div class="line number9 index8 alt2"><code class="as3 plain">sunion(key1, (keys)) ：求并集</code></div><div class="line number10 index9 alt1"><code class="as3 plain">sunionstore(dstkey, (keys)) ：求并集并将并集保存到dstkey的集合</code></div><div class="line number11 index10 alt2"><code class="as3 plain">sdiff(key1, (keys)) ：求差集</code></div><div class="line number12 index11 alt1"><code class="as3 plain">sdiffstore(dstkey, (keys)) ：求差集并将差集保存到dstkey的集合</code></div><div class="line number13 index12 alt2"><code class="as3 plain">smembers(key) ：返回名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">的所有元素</code></div><div class="line number14 index13 alt1"><code class="as3 plain">srandmember(key) ：随机返回名称为key的</code><code class="as3 keyword">set</code><code class="as3 plain">的一个元素</code></div></div></td></tr></tbody></table></div></div><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei';"></span><br></p><p><span style="font-size: 24px; color: rgb(0, 176, 80); font-family: '微软雅黑','microsoft yahei';"><br></span></p><p><span style="font-size: 24px; font-family: '微软雅黑','microsoft yahei'; color: rgb(0, 176, 80);">nosql用起来，性能好，使用简单，推荐大家经常用用~</span></p><p><br></p>
    		</div>

<pre>
referer:http://rfyiamcool.blog.51cto.com/1030776/1317007/
</pre>
